1:HL["/_next/static/media/e4af272ccee01ff0-s.p.woff2",{"as":"font","type":"font/woff2"}]
2:HL["/_next/static/css/b3171e58fb80086c.css",{"as":"style"}]
0:["31StNkVN_Jy8_pjb0-KVB",[[["",{"children":["blog",{"children":[["slug","BackendCORS2","d"],{"children":["__PAGE__?{\"slug\":\"BackendCORS2\"}",{}]}]}]},"$undefined","$undefined",true],"$L3",[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/b3171e58fb80086c.css","precedence":"next"}]],"$L4"]]]]
5:I{"id":6685,"chunks":["685:static/chunks/685-1c7543f9470b706b.js","222:static/chunks/222-846c3dee61afe17f.js","404:static/chunks/app/blog/page-4c4ed4280d9bd9ea.js"],"name":"","async":false}
6:I{"id":3222,"chunks":["685:static/chunks/685-1c7543f9470b706b.js","222:static/chunks/222-846c3dee61afe17f.js","404:static/chunks/app/blog/page-4c4ed4280d9bd9ea.js"],"name":"Image","async":false}
7:I{"id":7767,"chunks":["272:static/chunks/webpack-479ea16dcba490db.js","971:static/chunks/fd9d1056-5fc0659828b82348.js","596:static/chunks/596-5f69a5936ae99734.js"],"name":"default","async":false}
8:I{"id":7920,"chunks":["272:static/chunks/webpack-479ea16dcba490db.js","971:static/chunks/fd9d1056-5fc0659828b82348.js","596:static/chunks/596-5f69a5936ae99734.js"],"name":"default","async":false}
3:[null,["$","html",null,{"lang":"kr","children":["$","body",null,{"className":"__className_e8ce0c","children":["$","div",null,{"className":"w-full flex flex-col items-center p-3","children":[null,["$","header",null,{"className":"w-full max-w-3xl flex flex-row justify-between items-center my-1","children":[["$","$L5",null,{"href":"/","className":"flex flex-row items-center","children":[["$","$L6",null,{"src":"/logo.png","alt":"로고","width":30,"height":30,"objectFit":"cover","className":"rounded-full"}],["$","span",null,{"className":"mx-2 font-semibold text-lg","children":"jiohh blog"}]]}],["$","nav",null,{"children":[["$","$L5","Home",{"href":"/","className":"mr-5 ","children":"Home"}],["$","$L5","Blog",{"href":"/blog","className":"mr-5 ","children":"Blog"}],["$","$L5","Category",{"href":"/category","className":"mr-5 ","children":"Category"}]]}]]}],["$","main",null,{"className":"w-full max-w-3xl","children":["$","$L7",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L8",null,{}],"templateStyles":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":"$undefined","childProp":{"current":["$","$L7",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L8",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$L7",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children",["slug","BackendCORS2","d"],"children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L8",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$L9",["$","div",null,{"className":"mt-10 prose","children":[["$","h1",null,{"className":"","children":"시나리오 알아보는 CORS가 필요한 이유 - CORS"}],[["$","img",null,{"src":"/images/Backend/CORS.png","width":"100%","height":"100%"}],"\n",["$","p",null,{"children":"CORS의 핵심 보안 철학은 “내 웹사이트의 사용자가 모르게, 제3자 서버에 민감한 요청을 보내면 안 된다.”를 보장하는 것이다."}],"\n",["$","p",null,{"children":"브라우저가 다른 도메인에서 데이터를 가져오는 경우, 악성 웹사이트가 사용자 정보를 유출하거나, 다른 웹사이트의 기능을 조작하는 것을 방지한다."}],"\n",["$","p",null,{"children":"그렇다면 CORS 정책이 없고 다른 Origin을 허용한다면 어떠한 문제가 발생하게 될까?"}],"\n",["$","p",null,{"children":"다음의 경우 시나리오를 바탕으로 알아보자"}],"\n",["$","h2",null,{"children":"내 세션을 누가 써버린다??"}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":"사용자가 https://bank.com에 로그인해서 세션 쿠키 유지"}],"\n",["$","li",null,{"children":"이 상태로 사용자가 모르고 https://fakebank.com라는 악성 사이트에 접속"}],"\n",["$","li",null,{"children":"악성 사이트에서 기존의 https://bank.com로 요청을 보내게 된다면?"}],"\n"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"bank.com에서의 인증 요소를 가진 상태"}],"\n",["$","li",null,{"children":"악성 사이트(fackbank)의 코드로 정상적인 사이트에 임의의 요청이 가능"}],"\n"]}],"\n",["$","p",null,{"children":["사용자의 인증정보를 악용한 요청(서버의 상태를 바꾸거나, 어떠한 정보를 알아낼 수 있는)이 가능한 상태가 된다.",["$","br",null,{}],"\n","이때 악성 사이트는 요청을 통한 받은 정보를 임의의 주소로 전송하여 정보를 탈취할 수 있게 된다."]}],"\n",["$","h2",null,{"children":"CORS의 역할은?"}],"\n",["$","p",null,{"children":"CORS를 지원하는 브라우저의 역할이 중요한 부분이다."}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":"JS코드가 cross-origin 요청을 보내게 되면"}],"\n",["$","li",null,{"children":"브라우저는 응답을 받을 때까지 멈춤(simple요청, Preflight요청)"}],"\n",["$","li",null,{"children":["응답 헤더의 Access-Control-Allow-Origin헤더 확인","\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"있다면 응답을 요청을 보낸 코드(javascript)에게 넘겨줌,"}],"\n",["$","li",null,{"children":"없다면 응답을 숨기고, 에러를 발생시킴"}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","p",null,{"children":["simple요청의 경우 응답을 숨기기 때문에 JS코드에서 활용불가",["$","br",null,{}],"\n","Preflight요청의 경우 변경 요청이 아니기 때문에 서버의 데이터도 변경되지 않음"]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":"결국 보호하는 대상은?"}],["$","br",null,{}],"\n",["$","strong",null,{"children":"브라우저에 의해 실행되는 프론트엔드 JavaScript 코드의 보안 강화를 위한 정책"}]]}],"\n",["$","p",null,{"children":["즉 악성사이트가 요청을 보내 응답으로 온 정보를 유출하지 못하게 하는게 핵심인 정책으로",["$","br",null,{}],"\n","사용자의 민감한 데이터를 응답으로 읽어서 타 서버로 전송을 못하게 하는게 핵심이다."]}],"\n",["$","h2",null,{"children":"Preflight요청이 아닐 경우 서버에 요청이 보내기지 때문에 서버의 상태(이체, 수정 등)가 변경될 수 있는 것이 아닌가?"}],"\n",["$","p",null,{"children":"Preflight 조건을 찾아보던 중 제목과 같은 의문이 들었다."}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"브라우저는 “simple 요청”, 즉 “preflight 없는 요청”이라면, 그냥 서버로 전송함"}],"\n",["$","li",null,{"children":"이때 세션 쿠키도 자동으로 붙음"}],"\n",["$","li",null,{"children":"세션 쿠키가 붙어있으면, 서버는 ‘로그인된 사용자’라고 생각하고 요청을 처리"}],"\n"]}],"\n",["$","p",null,{"children":"즉, 서버의 상태(이체, 수정 등)는 실제로 바뀔 수 있음"}],"\n",["$","p",null,{"children":["특정 조건에서는 CORS로는 요청을 막을 수 없기 때문에 CORS만으로는 안전하지 않음",["$","br",null,{}],"\n","이러한 경우 CSRF 방어에 추가적인 전략이 필요하게 된다."]}],"\n",["$","p",null,{"children":"사실 CORS는 브라우저에 초점을 맞춘 보안정책일 뿐만 아니라 하나의 방법으로 모든 시나리오를 방어할 수는 없으니 어쩔 수 없는 결과라고 할 수 있다."}]]]}],null],"segment":"__PAGE__?{\"slug\":\"BackendCORS2\"}"},"styles":[]}],"segment":["slug","BackendCORS2","d"]},"styles":[]}],"segment":"blog"},"styles":[]}]}],["$","footer",null,{"className":"w-full max-w-3xl items-center ","children":[["$","div",null,{"className":"h-28"}]," "]}]]}]}]}],null]
4:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"지호의 블로그"}],["$","meta","2",{"name":"description","content":"Generated by create next app"}],["$","meta","3",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","link","4",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"16x16"}],["$","meta","5",{"name":"next-size-adjust"}]]
9:null
