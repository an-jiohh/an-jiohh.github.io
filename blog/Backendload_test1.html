<!DOCTYPE html><html lang="kr"><head><meta charSet="utf-8"/><link rel="preload" as="font" href="/_next/static/media/e4af272ccee01ff0-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/b3171e58fb80086c.css" data-precedence="next"/><link rel="preload" href="/_next/static/chunks/webpack-479ea16dcba490db.js" as="script"/><link rel="preload" href="/_next/static/chunks/fd9d1056-5fc0659828b82348.js" as="script"/><link rel="preload" href="/_next/static/chunks/596-5f69a5936ae99734.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-app-e8cf5a024458e18b.js" as="script"/><title>JWT와 Session의 성능 차이는 어떻게 될까? – 부하테스트 1</title><meta name="description" content="부하테스트 개요 및 환경 구성"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__className_e8ce0c"><div class="w-full flex flex-col items-center p-3"><header class="w-full max-w-3xl flex flex-row justify-between items-center my-1"><a class="flex flex-row items-center" href="/"><img alt="로고" loading="lazy" width="30" height="30" decoding="async" data-nimg="1" class="rounded-full" style="color:transparent" src="/logo.png"/><span class="mx-2 font-semibold text-lg">jiohh blog</span></a><nav><a class="mr-5 " href="/">Home</a><a class="mr-5 " href="/blog">Blog</a><a class="mr-5 " href="/category">Category</a></nav></header><main class="w-full max-w-3xl"><div class="mt-10 prose"><h1 class="">JWT와 Session의 성능 차이는 어떻게 될까? – 부하테스트 1</h1><img src="/images/Backend/jwt_vs_session.png" width="100%" height="100%"/>
<h4>JWT와 Session의 성능 차이는 어떻게 될까?</h4>
<ul>
<li><a href="https://an-jiohh.github.io/blog/Backendload_test1">부하테스트 1 - 부하테스트 개요 및 환경 구성</a>  ⬅️ 현재글</li>
<li><a href="https://an-jiohh.github.io/blog/Backendload_test2">부하테스트 2 - 부하테스트 진행</a></li>
<li><a href="https://an-jiohh.github.io/blog/Backendload_test3">부하테스트 3 - 부하테스트 정리 및 회고</a></li>
</ul>
<hr/>
<p>처음은 Session과 Jwt의 성능차이가 얼마나 될지에 대한 호기심이였다.<br/>
<!-- -->Jwt 암호화 비용 때문에 Jwt가 더 비용을 많이 잡아먹는다라고 있으나 직접한 사례를 찾기 힘들었다. 그래서 직접 해보기로 하였다.</p>
<p>이유를 나열하여 작성해보면 다음과 같다.</p>
<ul>
<li>Session과 Jwt 로그인의 성능을 직접적으로 측정해보고 싶었다.</li>
<li>로그인 과정을 직접 세세하게 구현 후 이를 Spring Security로 마이그레이션 해보면서 인증,인가 흐름도 제대로 확인해보고 싶었다.</li>
<li>인증, 인가 과정에서 필터/인터셉터 활용, DB조회, 세션 활용, Cache 최적화등 여러 방면에서 적용할 수 있으므로 인증/인가 뿐만아니라 웹서비스의 라이프 사이클을 가장 간단하게 복습해볼 수 있는 기회라고 생각<br/>
<!-- -->-&gt; JPQL을 이용하여 구현후 이를 다른 추가적인 비즈니스 로직에 적용해 본다면 충분히 다른 로직도 구성할 수 있지않을까 라는 생각</li>
<li>이전 프로젝트에서 부하테스트 없이 진행하였는데 간단한 로직에서도 문제가 발생하여 실제 실무에서는 부하를 어떻게 확인하고 개선하는지 궁금했음</li>
</ul>
<p>물론, 실무에서는 성능만이 아닌 모바일 지원여부, 아키텍처, 도메인에 따라 선택하지 않을까 싶다.</p>
<hr/>
<h2>부하 테스트 환경</h2>
<h3>로그인 서비스</h3>
<img src="/images/Backend/load_testing_service.png" width="100%" height="100%"/>
<p>간단한 서비스로 메모를 작성할 수 있는 서비스로 구현하였다.<br/>
<!-- -->JWT 인증 필터와 Session 인증 필터를 사용한 프로젝트 두개를 똑같이 생성하여 동일한 API 구조, 인증 방식만 다르게 구현하였다.</p>
<h3>부하 테스트 환경</h3>
<img src="/images/Backend/load_testing.png" width="100%" height="100%"/>
<p>부하 테스트에 사용된 최종 아키텍처의 모습이다.</p>
<p>K6를 선택한 이유는 가장 간단하게 부하테스트를 진행할 수 있다고 판단했기 때문이다.<br/>
<!-- -->대체제로 Jmeter등 여러 툴이 있었으나 가장 빠르고 쉽게 사용할 수 있다고 판단하여 K6를 선택하였다.</p>
<p>초기 K6에서 점차 추가되어 이렇게 구성되었다.  그 과정을 통해서 성능비교를 말해보고자 한다.</p>
<ol>
<li><strong>단일 K6 부하테스트 진행</strong></li>
<li><strong>K6 + InfluxDB + Grafana / 시계열 데이터 분석</strong></li>
<li><strong>K6 + telegraf + InfluxDb + Grafana /  시스템 메트릭 추가</strong></li>
</ol>
<hr/>
<h3>테스트 유형?</h3>
<p>먼저 테스트 유형을 이야기하고 진행하여야할 것 같다.</p>
<p>스모크 테스트, 스파이크 테스트, 부하 테스트, 스트레스 테스트, 내구 테스트, 임계점 테스트
등등 여러 목적을 가지고 있는 테스트 유형이 존재한다.
(각 테스트를 다 말하기에는 주제와 벗어나니 추후에 글 링크 추가)</p>
<p>이중 성능 비교에 어울리는 테스트를 선정하고 그에 맞추어서 구성하여야했다.</p>
<img src="/images/Backend/load_testing_graph.png" width="100%" height="100%"/>
<p>여러 테스트 중 시스템의 한계점인 임계지점을 찾을 수 있는 <strong>임계점 테스트</strong>로 진행했다.<br/>
<!-- -->임계지점을 비교하여 각 방식의 성능을 비교하였다.</p>
<h3>시나리오 설정</h3>
<p>Jwt와 세션에서 성능비교가 가능한 부분을 &quot;인가 + 인가 후 메모 생성&quot;으로 구성해서 진행했다.</p>
<p>즉, 성능차이가 발생하는 부분으로</p>
<ol>
<li>Jwt 방식 : Jwt가 토큰을 검증</li>
<li>Session 방식 : 세션에서 유저 정보를 검증</li>
</ol>
<ul>
<li>공통부분 : 메모작성</li>
</ul>
<p>이 과정이 핵심 로직일 뿐만아니라 가장 큰차이라고 생각하였다. 그래서 메모작성을 기준으로 시나리오를 구성하였다.</p>
<pre><code class="language-javascript">export const options = {
  stages: [
  { duration: &#x27;5m&#x27;, target: 2000 },
  { duration: &#x27;25m&#x27;, target: 5000 },  // 30초 동안 50명의 VUs로 증가
  { duration: &#x27;10s&#x27; , target: 0 },   // 30초 동안 VUs를 0으로 감소
  ],
};

export default function() {
  const url = &#x27;http://host.docker.internal:8080/api/memos&#x27;;
  const payload = JSON.stringify({
      &quot;content&quot;: &quot;contentText&quot;,
    });
  const params = {
    headers: {
      &#x27;Content-Type&#x27;: &#x27;application/json&#x27;,
      &#x27;Cookie&#x27;: &#x27;JSESSIONID=C8C891F97B812551C3CDAA6401323747&#x27;, // 또는
      &#x27;Authorization&#x27;: &#x27;Bearer eyJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwidXNlcklkIjoiMTIzNCIsIm5hbWUiOiLslYjrqZTrqqgiLCJyb2xlIjoiVVNFUiIsImlhdCI6MTc1MjgyMDk5NywiZXhwIjoxNzUyODIyNzk3fQ.lKek6DRTCnkVATit3I1eiHmlb3FiUrm3_KF8k4tKcYs&#x27;
    },
  };
  let res = http.post(url, payload, params);
  check(res, { &quot;status is 200&quot;: (res) =&gt; res.status === 200 });
  sleep(1);
}
</code></pre>
<p>최종적으로 사용한 시나리오는 위의 코드이다.</p>
<p>미리 구한 토큰이나 세션을 바탕으로 인가정보를 헤더에 세팅 후 이를 바탕으로 정해진 시나리오를 반복하도록 설정하였다.</p>
<p>기본적인 메모 생성 시나리오는 동일하게 가져갔고 vus 수나 시간을 변경하며 여러번 테스트를 반복하였다.</p>
<hr/>
<p>다음 글에서는 이를 바탕으로 어떻게 진행하였는지에 대한 내용이다.</p></div></main><footer class="w-full max-w-3xl items-center "><div class="h-28"></div> </footer></div><script src="/_next/static/chunks/webpack-479ea16dcba490db.js" async=""></script><script src="/_next/static/chunks/fd9d1056-5fc0659828b82348.js" async=""></script><script src="/_next/static/chunks/596-5f69a5936ae99734.js" async=""></script><script src="/_next/static/chunks/main-app-e8cf5a024458e18b.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/e4af272ccee01ff0-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/b3171e58fb80086c.css\",{\"as\":\"style\"}]\n0:\"$L3\"\n"])</script><script>self.__next_f.push([1,"4:I{\"id\":7948,\"chunks\":[\"272:static/chunks/webpack-479ea16dcba490db.js\",\"971:static/chunks/fd9d1056-5fc0659828b82348.js\",\"596:static/chunks/596-5f69a5936ae99734.js\"],\"name\":\"default\",\"async\":false}\n6:I{\"id\":6628,\"chunks\":[\"272:static/chunks/webpack-479ea16dcba490db.js\",\"971:static/chunks/fd9d1056-5fc0659828b82348.js\",\"596:static/chunks/596-5f69a5936ae99734.js\"],\"name\":\"\",\"async\":false}\n7:I{\"id\":6685,\"chunks\":[\"685:static/chunks/685-1c7543f9470b706b.js\",\"222:static/chunks/222-846c3dee61afe17f.js\",\"404:static"])</script><script>self.__next_f.push([1,"/chunks/app/blog/page-2b1879a4b7dd3b5f.js\"],\"name\":\"\",\"async\":false}\n8:I{\"id\":3222,\"chunks\":[\"685:static/chunks/685-1c7543f9470b706b.js\",\"222:static/chunks/222-846c3dee61afe17f.js\",\"404:static/chunks/app/blog/page-2b1879a4b7dd3b5f.js\"],\"name\":\"Image\",\"async\":false}\n9:I{\"id\":7767,\"chunks\":[\"272:static/chunks/webpack-479ea16dcba490db.js\",\"971:static/chunks/fd9d1056-5fc0659828b82348.js\",\"596:static/chunks/596-5f69a5936ae99734.js\"],\"name\":\"default\",\"async\":false}\na:I{\"id\":7920,\"chunks\":[\"272:static/chunks/webpa"])</script><script>self.__next_f.push([1,"ck-479ea16dcba490db.js\",\"971:static/chunks/fd9d1056-5fc0659828b82348.js\",\"596:static/chunks/596-5f69a5936ae99734.js\"],\"name\":\"default\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"3:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/b3171e58fb80086c.css\",\"precedence\":\"next\"}]],[\"$\",\"$L4\",null,{\"buildId\":\"izAL3T4tHRT-PY2RNTTC-\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/blog/Backendload_test1\",\"initialTree\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"Backendload_test1\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"Backendload_test1\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":\"$L5\",\"globalErrorComponent\":\"$6\",\"children\":[null,[\"$\",\"html\",null,{\"lang\":\"kr\",\"children\":[null,[\"$\",\"body\",null,{\"className\":\"__className_e8ce0c\",\"children\":[\"$\",\"div\",null,{\"className\":\"w-full flex flex-col items-center p-3\",\"children\":[null,[\"$\",\"header\",null,{\"className\":\"w-full max-w-3xl flex flex-row justify-between items-center my-1\",\"children\":[[\"$\",\"$L7\",null,{\"href\":\"/\",\"className\":\"flex flex-row items-center\",\"children\":[[\"$\",\"$L8\",null,{\"src\":\"/logo.png\",\"alt\":\"로고\",\"width\":30,\"height\":30,\"objectFit\":\"cover\",\"className\":\"rounded-full\"}],[\"$\",\"span\",null,{\"className\":\"mx-2 font-semibold text-lg\",\"children\":\"jiohh blog\"}]]}],[\"$\",\"nav\",null,{\"children\":[[\"$\",\"$L7\",\"Home\",{\"href\":\"/\",\"className\":\"mr-5 \",\"children\":\"Home\"}],[\"$\",\"$L7\",\"Blog\",{\"href\":\"/blog\",\"className\":\"mr-5 \",\"children\":\"Blog\"}],[\"$\",\"$L7\",\"Category\",{\"href\":\"/category\",\"className\":\"mr-5 \",\"children\":\"Category\"}]]}]]}],[\"$\",\"main\",null,{\"className\":\"w-full max-w-3xl\",\"children\":[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",[\"slug\",\"Backendload_test1\",\"d\"],\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$Lb\",[\"$\",\"div\",null,{\"className\":\"mt-10 prose\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"\",\"children\":\"JWT와 Session의 성능 차이는 어떻게 될까? – 부하테스트 1\"}],[[\"$\",\"img\",null,{\"src\":\"/images/Backend/jwt_vs_session.png\",\"width\":\"100%\",\"height\":\"100%\"}],\"\\n\",[\"$\",\"h4\",null,{\"children\":\"JWT와 Session의 성능 차이는 어떻게 될까?\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"https://an-jiohh.github.io/blog/Backendload_test1\",\"children\":\"부하테스트 1 - 부하테스트 개요 및 환경 구성\"}],\"  ⬅️ 현재글\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://an-jiohh.github.io/blog/Backendload_test2\",\"children\":\"부하테스트 2 - 부하테스트 진행\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"a\",null,{\"href\":\"https://an-jiohh.github.io/blog/Backendload_test3\",\"children\":\"부하테스트 3 - 부하테스트 정리 및 회고\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"처음은 Session과 Jwt의 성능차이가 얼마나 될지에 대한 호기심이였다.\",[\"$\",\"br\",null,{}],\"\\n\",\"Jwt 암호화 비용 때문에 Jwt가 더 비용을 많이 잡아먹는다라고 있으나 직접한 사례를 찾기 힘들었다. 그래서 직접 해보기로 하였다.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"이유를 나열하여 작성해보면 다음과 같다.\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Session과 Jwt 로그인의 성능을 직접적으로 측정해보고 싶었다.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"로그인 과정을 직접 세세하게 구현 후 이를 Spring Security로 마이그레이션 해보면서 인증,인가 흐름도 제대로 확인해보고 싶었다.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"인증, 인가 과정에서 필터/인터셉터 활용, DB조회, 세션 활용, Cache 최적화등 여러 방면에서 적용할 수 있으므로 인증/인가 뿐만아니라 웹서비스의 라이프 사이클을 가장 간단하게 복습해볼 수 있는 기회라고 생각\",[\"$\",\"br\",null,{}],\"\\n\",\"-\u003e JPQL을 이용하여 구현후 이를 다른 추가적인 비즈니스 로직에 적용해 본다면 충분히 다른 로직도 구성할 수 있지않을까 라는 생각\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"이전 프로젝트에서 부하테스트 없이 진행하였는데 간단한 로직에서도 문제가 발생하여 실제 실무에서는 부하를 어떻게 확인하고 개선하는지 궁금했음\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"물론, 실무에서는 성능만이 아닌 모바일 지원여부, 아키텍처, 도메인에 따라 선택하지 않을까 싶다.\"}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"부하 테스트 환경\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"로그인 서비스\"}],\"\\n\",[\"$\",\"img\",null,{\"src\":\"/images/Backend/load_testing_service.png\",\"width\":\"100%\",\"height\":\"100%\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"간단한 서비스로 메모를 작성할 수 있는 서비스로 구현하였다.\",[\"$\",\"br\",null,{}],\"\\n\",\"JWT 인증 필터와 Session 인증 필터를 사용한 프로젝트 두개를 똑같이 생성하여 동일한 API 구조, 인증 방식만 다르게 구현하였다.\"]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"부하 테스트 환경\"}],\"\\n\",[\"$\",\"img\",null,{\"src\":\"/images/Backend/load_testing.png\",\"width\":\"100%\",\"height\":\"100%\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"부하 테스트에 사용된 최종 아키텍처의 모습이다.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"K6를 선택한 이유는 가장 간단하게 부하테스트를 진행할 수 있다고 판단했기 때문이다.\",[\"$\",\"br\",null,{}],\"\\n\",\"대체제로 Jmeter등 여러 툴이 있었으나 가장 빠르고 쉽게 사용할 수 있다고 판단하여 K6를 선택하였다.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"초기 K6에서 점차 추가되어 이렇게 구성되었다.  그 과정을 통해서 성능비교를 말해보고자 한다.\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"단일 K6 부하테스트 진행\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"K6 + InfluxDB + Grafana / 시계열 데이터 분석\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"K6 + telegraf + InfluxDb + Grafana /  시스템 메트릭 추가\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"테스트 유형?\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"먼저 테스트 유형을 이야기하고 진행하여야할 것 같다.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"스모크 테스트, 스파이크 테스트, 부하 테스트, 스트레스 테스트, 내구 테스트, 임계점 테스트\\n등등 여러 목적을 가지고 있는 테스트 유형이 존재한다.\\n(각 테스트를 다 말하기에는 주제와 벗어나니 추후에 글 링크 추가)\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"이중 성능 비교에 어울리는 테스트를 선정하고 그에 맞추어서 구성하여야했다.\"}],\"\\n\",[\"$\",\"img\",null,{\"src\":\"/images/Backend/load_testing_graph.png\",\"width\":\"100%\",\"height\":\"100%\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"여러 테스트 중 시스템의 한계점인 임계지점을 찾을 수 있는 \",[\"$\",\"strong\",null,{\"children\":\"임계점 테스트\"}],\"로 진행했다.\",[\"$\",\"br\",null,{}],\"\\n\",\"임계지점을 비교하여 각 방식의 성능을 비교하였다.\"]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"시나리오 설정\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Jwt와 세션에서 성능비교가 가능한 부분을 \\\"인가 + 인가 후 메모 생성\\\"으로 구성해서 진행했다.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"즉, 성능차이가 발생하는 부분으로\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Jwt 방식 : Jwt가 토큰을 검증\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Session 방식 : 세션에서 유저 정보를 검증\"}],\"\\n\"]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"공통부분 : 메모작성\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"이 과정이 핵심 로직일 뿐만아니라 가장 큰차이라고 생각하였다. 그래서 메모작성을 기준으로 시나리오를 구성하였다.\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-javascript\",\"children\":\"export const options = {\\n  stages: [\\n  { duration: '5m', target: 2000 },\\n  { duration: '25m', target: 5000 },  // 30초 동안 50명의 VUs로 증가\\n  { duration: '10s' , target: 0 },   // 30초 동안 VUs를 0으로 감소\\n  ],\\n};\\n\\nexport default function() {\\n  const url = 'http://host.docker.internal:8080/api/memos';\\n  const payload = JSON.stringify({\\n      \\\"content\\\": \\\"contentText\\\",\\n    });\\n  const params = {\\n    headers: {\\n      'Content-Type': 'application/json',\\n      'Cookie': 'JSESSIONID=C8C891F97B812551C3CDAA6401323747', // 또는\\n      'Authorization': 'Bearer eyJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwidXNlcklkIjoiMTIzNCIsIm5hbWUiOiLslYjrqZTrqqgiLCJyb2xlIjoiVVNFUiIsImlhdCI6MTc1MjgyMDk5NywiZXhwIjoxNzUyODIyNzk3fQ.lKek6DRTCnkVATit3I1eiHmlb3FiUrm3_KF8k4tKcYs'\\n    },\\n  };\\n  let res = http.post(url, payload, params);\\n  check(res, { \\\"status is 200\\\": (res) =\u003e res.status === 200 });\\n  sleep(1);\\n}\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"최종적으로 사용한 시나리오는 위의 코드이다.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"미리 구한 토큰이나 세션을 바탕으로 인가정보를 헤더에 세팅 후 이를 바탕으로 정해진 시나리오를 반복하도록 설정하였다.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"기본적인 메모 생성 시나리오는 동일하게 가져갔고 vus 수나 시간을 변경하며 여러번 테스트를 반복하였다.\"}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"다음 글에서는 이를 바탕으로 어떻게 진행하였는지에 대한 내용이다.\"}]]]}],null],\"segment\":\"__PAGE__?{\\\"slug\\\":\\\"Backendload_test1\\\"}\"},\"styles\":[]}],\"segment\":[\"slug\",\"Backendload_test1\",\"d\"]},\"styles\":[]}],\"segment\":\"blog\"},\"styles\":[]}]}],[\"$\",\"footer\",null,{\"className\":\"w-full max-w-3xl items-center \",\"children\":[[\"$\",\"div\",null,{\"className\":\"h-28\"}],\" \"]}]]}]}]]}],null]}]]\n"])</script><script>self.__next_f.push([1,"5:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"JWT와 Session의 성능 차이는 어떻게 될까? – 부하테스트 1\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"부하테스트 개요 및 환경 구성\"}],[\"$\",\"meta\",\"3\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"link\",\"4\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}],[\"$\",\"meta\",\"5\",{\"name\":\"next-size-adjust\"}]]\nb:null\n"])</script></body></html>