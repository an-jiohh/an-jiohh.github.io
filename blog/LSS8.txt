1:HL["/_next/static/media/c9a5bc6a7c948fb0-s.p.woff2",{"as":"font","type":"font/woff2"}]
2:HL["/_next/static/css/ac3cf4dbb438b581.css",{"as":"style"}]
0:["OdxR1EgCQrexdh9kooTwj",[[["",{"children":["blog",{"children":[["slug","LSS8","d"],{"children":["__PAGE__?{\"slug\":\"LSS8\"}",{}]}]}]},"$undefined","$undefined",true],"$L3",[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/ac3cf4dbb438b581.css","precedence":"next"}]],"$L4"]]]]
5:I{"id":6685,"chunks":["685:static/chunks/685-1c7543f9470b706b.js","222:static/chunks/222-846c3dee61afe17f.js","404:static/chunks/app/blog/page-f6630789f282f574.js"],"name":"","async":false}
6:I{"id":3222,"chunks":["685:static/chunks/685-1c7543f9470b706b.js","222:static/chunks/222-846c3dee61afe17f.js","404:static/chunks/app/blog/page-f6630789f282f574.js"],"name":"Image","async":false}
7:I{"id":7767,"chunks":["272:static/chunks/webpack-4a93926860992cce.js","971:static/chunks/fd9d1056-5fc0659828b82348.js","596:static/chunks/596-5f69a5936ae99734.js"],"name":"default","async":false}
8:I{"id":7920,"chunks":["272:static/chunks/webpack-4a93926860992cce.js","971:static/chunks/fd9d1056-5fc0659828b82348.js","596:static/chunks/596-5f69a5936ae99734.js"],"name":"default","async":false}
3:[null,["$","html",null,{"lang":"kr","children":["$","body",null,{"className":"__className_e66fe9","children":["$","div",null,{"className":"w-full flex flex-col items-center p-3","children":[null,["$","header",null,{"className":"w-full max-w-3xl flex flex-row justify-between items-center my-1","children":[["$","$L5",null,{"href":"/","className":"flex flex-row items-center","children":[["$","$L6",null,{"src":"/logo.png","alt":"로고","width":30,"height":30,"objectFit":"cover","className":"rounded-full"}],["$","span",null,{"className":"mx-2 font-semibold text-lg","children":"jiohh blog"}]]}],["$","nav",null,{"children":[["$","$L5","Home",{"href":"/","className":"mr-5 ","children":"Home"}],["$","$L5","Blog",{"href":"/blog","className":"mr-5 ","children":"Blog"}],["$","$L5","Category",{"href":"/category","className":"mr-5 ","children":"Category"}]]}]]}],["$","main",null,{"className":"w-full max-w-3xl","children":["$","$L7",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L8",null,{}],"templateStyles":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":"$undefined","childProp":{"current":["$","$L7",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L8",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$L7",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children",["slug","LSS8","d"],"children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L8",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$L9",["$","div",null,{"className":"mt-10 prose","children":[["$","h1",null,{"className":"","children":"8장 - URL 단축기 설계"}],[["$","h2",null,{"children":"목표"}],"\n",["$","p",null,{"children":"재미있는ㄴ URL 단축기를 설계해보자"}],"\n",["$","h2",null,{"children":"1단계 문제 이해 및 설계 범위 확정"}],"\n",["$","p",null,{"children":"지원자 질문"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"URL 단축기가 어떻게 동작해야 하는지 예제를 보여줄 수 있을까? -> 이게 왜필요하지?"}],"\n",["$","li",null,{"children":"트래픽 규모는?"}],"\n",["$","li",null,{"children":"단축 URL의 길이는?"}],"\n",["$","li",null,{"children":"단축 ULR에 포함될 문자에 대한 제한?"}],"\n",["$","li",null,{"children":"단축된 URL을 시스템에서 지우거나 갱신할 수 있는지?"}],"\n"]}],"\n",["$","p",null,{"children":"면접관 대답"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"https://www.naver.com -> https://tinyurl.com/"}],"\n",["$","li",null,{"children":"매일 1억개의 단축 URL을 만들어야함"}],"\n",["$","li",null,{"children":"길이는 짧으면 짧을수록 좋음"}],"\n",["$","li",null,{"children":"문자는 숫자, 영문자(소문자+대문자)까지만 사용"}],"\n",["$","li",null,{"children":"시스템은 단순화하기위해 갱신은 불가"}],"\n"]}],"\n",["$","p",null,{"children":"질문을 통해 다음 기능을 도출"}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":"URL 단축 : 긴 URL을 훨씬 짧게 줄인다"}],"\n",["$","li",null,{"children":"URL 리디렉션 : 축약된 URL로 HTTP 요청이 오면 원래 URL로 안내"}],"\n",["$","li",null,{"children":"높은 가용성과 규모 확장성, 그리고 장애 감내가 요구됨\n(트래픽 규모 떄문에 그런건지 의문?)"}],"\n"]}],"\n",["$","h3",null,{"children":"개략적 추정"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"쓰기 연산 : 매일 1억개 URL 생성"}],"\n",["$","li",null,{"children":"초당 쓰기 연산 : 1억/24/3600 = 1160"}],"\n",["$","li",null,{"children":"읽기연산 : 읽기연산이 쓰기연산의 10배로 가정할떄 초당 11600회"}],"\n",["$","li",null,{"children":["레코드 보관","\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":"10년간 운영하면 1억 _ 365 _ 10 = 3650억개 레코드"}],"\n",["$","li",null,{"children":"축약전 URL의 길이를 100으로 가정"}],"\n",["$","li",null,{"children":"3650억 * 100byte = 36.5TB"}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","h2",null,{"children":"2단계 개략적 설계안 제시 및 동의 구하기"}],"\n",["$","h3",null,{"children":"API 엔드포인트"}],"\n",["$","p",null,{"children":"URL단추기를 RESTful API로 설계할 경우 두 개의 엔드포인트를 필요로 한다."}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":["\n",["$","p",null,{"children":"ULR 단축용 엔드포인트"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"새 단축 URL 생성"}],"\n",["$","li",null,{"children":"http method : post"}],"\n",["$","li",null,{"children":"인자 : (longURL: longURLstring)"}],"\n",["$","li",null,{"children":"반환 : 단축 URL"}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":"URL 리디렉션용 엔드포인트"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"http method : get"}],"\n",["$","li",null,{"children":"단축 URL에 HTTP 요청이 오면 원래 URL로 반환"}],"\n",["$","li",null,{"children":"반환 : http 리디렉션 목적지가 될 원래 URL"}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","h3",null,{"children":"URL 리디렉션"}],"\n",["$","img",null,{"src":"/images/LSS/urlredirect.jpg","width":"60%","height":"100%"}],"\n",["$","p",null,{"children":"단축 url 사용시 url을 받은 서버는 원래 url로 바꾸어서 301또는 302 응답으로 location 헤더에 넣어 반환한다."}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["\n",["$","p",null,{"children":["301(Permanently Moved)",["$","br",null,{}],"\n","URL에 대한 HTTP 요청의 처리 책임이 영구적으로 반환된 URL로 이전",["$","br",null,{}],"\n","브라우저는 응답을 캐시하여 추후에 같은 요청시 바뀐 URL로 이전"]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":["302(Found)",["$","br",null,{}],"\n","일시적으로 반환된 URL에 의해 처리되어야 한다는 응답",["$","br",null,{}],"\n","단축 url요청은 언제나 단축 url서버에 먼저 보내진 후 원래 url로 리디렉션"]}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":"301 장점 : 서버 부하가 줄어듬"}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":"302 장점 : 트래픽 분석 가능"}],"\n"]}],"\n"]}],"\n",["$","p",null,{"children":"리다렉션을 구현하는 직관적인 방법은 해시 테이블을 사용"}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":"원래 url = hashTable.get(단축 url)"}],"\n",["$","li",null,{"children":"301또는 302응답에 원래 url을 넣어 전송"}],"\n"]}],"\n",["$","p",null,{"children":"위의 단축 url을 어떻게 만들까?"}],"\n",["$","h3",null,{"children":"URL 단축"}],"\n",["$","p",null,{"children":["해시함수를 이용한다 : 긴 url ➡️ ",["$","strong",null,{"children":"해시 함수"}]," ➡️ 단축 url"]}],"\n",["$","p",null,{"children":"해시 함수 요구사항"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"입력으로 주어지는 긴 url이 다른 값이면 해시값도 달라야함"}],"\n",["$","li",null,{"children":"계산된 해시 값은 긴 url로 복원될 수 있어야함"}],"\n"]}],"\n",["$","h2",null,{"children":"3단계 상세 설계"}],"\n",["$","h3",null,{"children":"데이터 모델"}],"\n",["$","p",null,{"children":"초기 설계 : 모든 것을 메모리에 위치한 해시테이블"}],"\n",["$","p",null,{"children":"-> (단축 URL, 원래 URL)의 순서쌍을 관계형 데이터베이스에 저장"}],"\n",["$","h3",null,{"children":"해시 함수"}],"\n",["$","h4",null,{"children":"해시 값 길이"}],"\n",["$","p",null,{"children":["사용할 수 있는 문자의 개수 = 10(숫자) + 26(영소문자) + 26(영대문자) = 62개",["$","br",null,{}],"\n","처음에 계산했던 3650억 레코드를 보관하기 위해서는 62^n >= 3650억인 n의 최솟값을 찾아야한다."]}],"\n",["$","p",null,{"children":"n = 6, 568억 개 / n = 7, 3.5조 개로 hashvalue의 길이를 7로 설정"}],"\n",["$","p",null,{"children":"해시함수 구현에 쓰일 두가지 방법을 살펴보자"}],"\n",["$","h4",null,{"children":"해시 후 충돌 해소"}],"\n",["$","p",null,{"children":["손쉬운 방법은 CRC32, MD5, SHA-1같이 알려진 해시 함수를 이용",["$","br",null,{}],"\n","하지만 해시값의 길이가 길다는 문제 발생"]}],"\n",["$","p",null,{"children":"해결방법"}],"\n",["$","p",null,{"children":["해시 값에서 처음 7개 글자만 이용하는 것(원하는 길이만 사용)",["$","br",null,{}],"\n","이렇게하면 해시결과가 서로 충돌할 확률이 높아진다.",["$","br",null,{}],"\n","충돌이 해소될때까지 사전에 정한 문자열을 해시값에 덧붙임으로 해결"]}],"\n",["$","img",null,{"src":"/images/LSS/crushHash.jpg","width":"80%","height":"100%"}],"\n",["$","p",null,{"children":["단점\n충돌은 해소할 수 있지만 단축 url을 생성할때 한 번 이상 데이터베이스 질의로 오버헤드가 큼",["$","br",null,{}],"\n","➡️ 베이터베이스 대신 블룸필터를 사용"]}],"\n",["$","h4",null,{"children":"base-62 변환"}],"\n",["$","p",null,{"children":"이 기법은 수의 표현 방식이 다른 두 시스템이 같은 수를 공유하여야 하는 경우에 유용하다(???)"}],"\n",["$","p",null,{"children":"유일성 보장 ID생성기에서 생성된 값을 진법 변환기를 사용하여 나온 값을 단축 URL로 사용"}],"\n",["$","h4",null,{"children":"두 접근법 비교"}],"\n",["$","img",null,{"src":"/images/LSS/base-62.jpg","width":"80%","height":"100%"}],"\n",["$","hr",null,{}],"\n",["$","h3",null,{"children":"URL 단축기 상세 설계"}],"\n",["$","p",null,{"children":"base-62 변환을 사용해 설계"}],"\n",["$","img",null,{"src":"/images/LSS/urlshorter.jpg","width":"80%","height":"100%"}],"\n",["$","h3",null,{"children":"URL 리디렉션 상세 설계"}],"\n",["$","img",null,{"src":"/images/LSS/urlredirectionCache.jpg","width":"80%","height":"100%"}],"\n",["$","p",null,{"children":"(단축 URL, 원래 URL)의 쌍을 캐시에 저장하여 성능 개선"}],"\n",["$","h2",null,{"children":"4단계 마무리"}],"\n",["$","p",null,{"children":"다음과 같은 이야기를 마무리로 추가할 수 있다."}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"처리율 제한장치 : 엄청난 양의 URL 단축 요청으로인한 무력화 개선"}],"\n",["$","li",null,{"children":"웹 서버의 규모 확장 : 무상태 계층이므로 새로 증설하거나 삭제 할 수 있다."}],"\n",["$","li",null,{"children":"데이터베이스의 규모확장 : 다중화, 샤딩으로 규모 확장성 달성"}],"\n",["$","li",null,{"children":"데이터 분석 솔류션 : 분석 솔류션을 두어 비지니스에 필요한 데이터 뽑아낼 수 있음"}],"\n",["$","li",null,{"children":"가용성, 데이터 일관선, 안전성에 대한 이야기"}],"\n"]}]]]}],null],"segment":"__PAGE__?{\"slug\":\"LSS8\"}"},"styles":[]}],"segment":["slug","LSS8","d"]},"styles":[]}],"segment":"blog"},"styles":[]}]}]]}]}]}],null]
4:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"Create Next App"}],["$","meta","2",{"name":"description","content":"Generated by create next app"}],["$","meta","3",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","link","4",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"16x16"}],["$","meta","5",{"name":"next-size-adjust"}]]
9:null
